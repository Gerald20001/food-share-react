import{f as v,d as b,r as i,j as e,S as g}from"./index-BLSWsbFh.js";/* empty css                     */function S(){const l=v(),{user:a,updateUser:f}=b(),[r,o]=i.useState({name:"",description:""}),[c,d]=i.useState(!1),[m,p]=i.useState("");i.useEffect(()=>{a&&(o({name:a.name||"",description:a.description||""}),p(a.avatarUrl))},[a]);const u=s=>{const{name:t,value:n}=s.target;o(j=>({...j,[t]:n}))},h=s=>{const t=s.target.files[0];if(t){const n=URL.createObjectURL(t);p(n)}},x=async s=>{s.preventDefault(),d(!0);const t={...r,avatarUrl:m},n=await f(t);d(!1),l(`/profile/${n.id}`)};return a?e.jsxs("div",{className:"form-page-container",children:[e.jsx("h1",{className:"form-page-title",children:"Редактировать профиль"}),e.jsxs("form",{className:"offer-form",onSubmit:x,children:[e.jsxs("div",{className:"form-field",children:[e.jsx("label",{children:"Фото профиля"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[e.jsx("img",{src:m,alt:"Предпросмотр",style:{width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover"}}),e.jsx("label",{htmlFor:"avatar-upload",className:"btn btn-secondary",children:"Загрузить"}),e.jsx("input",{type:"file",id:"avatar-upload",accept:"image/*",onChange:h,style:{display:"none"}})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"name",children:"Имя / Название"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:u,required:!0})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"description",children:"Описание"}),e.jsx("textarea",{id:"description",name:"description",rows:"5",value:r.description,onChange:u})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(`/profile/${a.id}`),children:"Отмена"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c,children:c?e.jsx(g,{}):"Сохранить"})]})]})]}):e.jsx("div",{children:"Загрузка профиля..."})}export{S as default};
