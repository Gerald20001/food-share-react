import{r as S}from"./index-BLSWsbFh.js";const $=new Set,d=new WeakMap,T=new WeakMap,h=new WeakMap,B=new WeakMap,z=new WeakMap,N=new WeakMap,E=new WeakMap,b=new WeakMap,C=new WeakSet;let u,j=0,H=0;const w="__aa_tgt",L="__aa_del",k="__aa_new",q=t=>{const e=et(t);e&&e.forEach(o=>nt(o))},K=t=>{t.forEach(e=>{e.target===u&&Z(),d.has(e.target)&&M(e.target)})};function Q(t){const e=t.getBoundingClientRect(),o=u?.clientWidth||0,n=u?.clientHeight||0;return e.bottom<0||e.top>n||e.right<0||e.left>o}function X(t){const e=B.get(t);e?.disconnect();let o=d.get(t),n=0;const i=5;o||(o=W(t),d.set(t,o));const{offsetWidth:s,offsetHeight:r}=u,c=[o.top-i,s-(o.left+i+o.width),r-(o.top+i+o.height),o.left-i].map(f=>`${-1*Math.floor(f)}px`).join(" "),l=new IntersectionObserver(()=>{++n>1&&M(t)},{root:u,threshold:1,rootMargin:c});l.observe(t),B.set(t,l)}function M(t,e=!0){clearTimeout(b.get(t));const o=A(t),n=e?P(o)?500:o.duration:0;b.set(t,setTimeout(async()=>{const i=h.get(t);try{await i?.finished,d.set(t,W(t)),X(t)}catch{}},n))}function Z(){clearTimeout(b.get(u)),b.set(u,setTimeout(()=>{$.forEach(t=>_(t,e=>U(()=>M(e))))},100))}function tt(t){setTimeout(()=>{N.set(t,setInterval(()=>U(M.bind(null,t)),2e3))},Math.round(2e3*Math.random()))}function U(t){typeof requestIdleCallback=="function"?requestIdleCallback(()=>t()):requestAnimationFrame(()=>t())}let v;const G=typeof window<"u"&&"ResizeObserver"in window;G&&(u=document.documentElement,new MutationObserver(q),v=new ResizeObserver(K),window.addEventListener("scroll",()=>{H=window.scrollY,j=window.scrollX}),v.observe(u));function et(t){return t.reduce((n,i)=>[...n,...Array.from(i.addedNodes),...Array.from(i.removedNodes)],[]).every(n=>n.nodeName==="#comment")?!1:t.reduce((n,i)=>{if(n===!1)return!1;if(i.target instanceof Element){if(R(i.target),!n.has(i.target)){n.add(i.target);for(let s=0;s<i.target.children.length;s++){const r=i.target.children.item(s);if(r){if(L in r)return!1;R(i.target,r),n.add(r)}}}if(i.removedNodes.length)for(let s=0;s<i.removedNodes.length;s++){const r=i.removedNodes[s];if(L in r)return!1;r instanceof Element&&(n.add(r),R(i.target,r),T.set(r,[i.previousSibling,i.nextSibling]))}}return n},new Set)}function R(t,e){!e&&!(w in t)?Object.defineProperty(t,w,{value:t}):e&&!(w in e)&&Object.defineProperty(e,w,{value:t})}function nt(t){var e,o;const n=t.isConnected,i=d.has(t);n&&T.has(t)&&T.delete(t),((e=h.get(t))===null||e===void 0?void 0:e.playState)!=="finished"&&((o=h.get(t))===null||o===void 0||o.cancel()),k in t?I(t):i&&n?it(t):i&&!n?st(t):I(t)}function m(t){return Number(t.replace(/[^0-9.\-]/g,""))}function ot(t){let e=t.parentElement;for(;e;){if(e.scrollLeft||e.scrollTop)return{x:e.scrollLeft,y:e.scrollTop};e=e.parentElement}return{x:0,y:0}}function W(t){const e=t.getBoundingClientRect(),{x:o,y:n}=ot(t);return{top:e.top+n,left:e.left+o,width:e.width,height:e.height}}function V(t,e,o){let n=e.width,i=e.height,s=o.width,r=o.height;const a=getComputedStyle(t);if(a.getPropertyValue("box-sizing")==="content-box"){const l=m(a.paddingTop)+m(a.paddingBottom)+m(a.borderTopWidth)+m(a.borderBottomWidth),f=m(a.paddingLeft)+m(a.paddingRight)+m(a.borderRightWidth)+m(a.borderLeftWidth);n-=f,s-=f,i-=l,r-=l}return[n,s,i,r].map(Math.round)}function A(t){return w in t&&E.has(t[w])?E.get(t[w]):{duration:250,easing:"ease-in-out"}}function J(t){if(w in t)return t[w]}function Y(t){const e=J(t);return e?C.has(e):!1}function _(t,...e){e.forEach(o=>o(t,E.has(t)));for(let o=0;o<t.children.length;o++){const n=t.children.item(o);n&&e.forEach(i=>i(n,E.has(n)))}}function D(t){return Array.isArray(t)?t:[t]}function P(t){return typeof t=="function"}function it(t){const e=d.get(t),o=W(t);if(!Y(t))return d.set(t,o);if(Q(t)){d.set(t,o),X(t);return}let n;if(!e)return;const i=A(t);if(typeof i!="function"){let s=e.left-o.left,r=e.top-o.top;const a=e.left+e.width-(o.left+o.width);e.top+e.height-(o.top+o.height)==0&&(r=0),a==0&&(s=0);const[l,f,O,p]=V(t,e,o),g={transform:`translate(${s}px, ${r}px)`},y={transform:"translate(0, 0)"};l!==f&&(g.width=`${l}px`,y.width=`${f}px`),O!==p&&(g.height=`${O}px`,y.height=`${p}px`),n=t.animate([g,y],{duration:i.duration,easing:i.easing})}else{const[s]=D(i(t,"remain",e,o));n=new Animation(s),n.play()}h.set(t,n),d.set(t,o),n.addEventListener("finish",M.bind(null,t,!1),{once:!0})}function I(t){k in t&&delete t[k];const e=W(t);d.set(t,e);const o=A(t);if(!Y(t))return;if(Q(t)){X(t);return}let n;if(typeof o!="function")n=t.animate([{transform:"scale(.98)",opacity:0},{transform:"scale(0.98)",opacity:0,offset:.5},{transform:"scale(1)",opacity:1}],{duration:o.duration*1.5,easing:"ease-in"});else{const[i]=D(o(t,"add",e));n=new Animation(i),n.play()}h.set(t,n),n.addEventListener("finish",M.bind(null,t,!1),{once:!0})}function F(t,e){var o;t.remove(),d.delete(t),T.delete(t),h.delete(t),(o=B.get(t))===null||o===void 0||o.disconnect(),setTimeout(()=>{if(L in t&&delete t[L],Object.defineProperty(t,k,{value:!0,configurable:!0}),e&&t instanceof HTMLElement)for(const n in e)t.style[n]=""},0)}function st(t){var e;if(!T.has(t)||!d.has(t))return;const[o,n]=T.get(t);Object.defineProperty(t,L,{value:!0,configurable:!0});const i=window.scrollX,s=window.scrollY;if(n&&n.parentNode&&n.parentNode instanceof Element?n.parentNode.insertBefore(t,n):o&&o.parentNode?o.parentNode.appendChild(t):(e=J(t))===null||e===void 0||e.appendChild(t),!Y(t))return F(t);const[r,a,c,l]=at(t),f=A(t),O=d.get(t);(i!==j||s!==H)&&rt(t,i,s,f);let p,g={position:"absolute",top:`${r}px`,left:`${a}px`,width:`${c}px`,height:`${l}px`,margin:"0",pointerEvents:"none",transformOrigin:"center",zIndex:"100"};if(!P(f))Object.assign(t.style,g),p=t.animate([{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}],{duration:f.duration,easing:"ease-out"});else{const[y,x]=D(f(t,"remove",O));x?.styleReset!==!1&&(g=x?.styleReset||g,Object.assign(t.style,g)),p=new Animation(y),p.play()}h.set(t,p),p.addEventListener("finish",()=>F(t,g),{once:!0})}function rt(t,e,o,n){const i=j-e,s=H-o,r=document.documentElement.style.scrollBehavior;if(getComputedStyle(u).scrollBehavior==="smooth"&&(document.documentElement.style.scrollBehavior="auto"),window.scrollTo(window.scrollX+i,window.scrollY+s),!t.parentElement)return;const c=t.parentElement;let l=c.clientHeight,f=c.clientWidth;const O=performance.now();function p(){requestAnimationFrame(()=>{if(!P(n)){const g=l-c.clientHeight,y=f-c.clientWidth;O+n.duration>performance.now()?(window.scrollTo({left:window.scrollX-y,top:window.scrollY-g}),l=c.clientHeight,f=c.clientWidth,p()):document.documentElement.style.scrollBehavior=r}})}p()}function at(t){var e;const o=d.get(t),[n,,i]=V(t,o,W(t));let s=t.parentElement;for(;s&&(getComputedStyle(s).position==="static"||s instanceof HTMLBodyElement);)s=s.parentElement;s||(s=document.body);const r=getComputedStyle(s),a=!h.has(t)||((e=h.get(t))===null||e===void 0?void 0:e.playState)==="finished"?W(s):d.get(s),c=Math.round(o.top-a.top)-m(r.borderTopWidth),l=Math.round(o.left-a.left)-m(r.borderLeftWidth);return[c,l,n,i]}function ct(t,e={}){if(G&&v&&!(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&!P(e)&&!e.disrespectUserMotionPreference)){C.add(t),getComputedStyle(t).position==="static"&&Object.assign(t.style,{position:"relative"}),_(t,M,tt,r=>v?.observe(r)),P(e)?E.set(t,e):E.set(t,{duration:250,easing:"ease-in-out",...e});const s=new MutationObserver(q);s.observe(t,{childList:!0}),z.set(t,s),$.add(t)}return Object.freeze({parent:t,enable:()=>{C.add(t)},disable:()=>{C.delete(t),_(t,n=>{const i=h.get(n);try{i?.cancel()}catch{}h.delete(n);const s=b.get(n);s&&clearTimeout(s),b.delete(n);const r=N.get(n);r&&clearInterval(r),N.delete(n)})},isEnabled:()=>C.has(t),destroy:()=>{C.delete(t),$.delete(t),E.delete(t);const n=z.get(t);n?.disconnect(),z.delete(t),_(t,i=>{v?.unobserve(i);const s=h.get(i);try{s?.cancel()}catch{}h.delete(i);const r=B.get(i);r?.disconnect(),B.delete(i);const a=N.get(i);a&&clearInterval(a),N.delete(i);const c=b.get(i);c&&clearTimeout(c),b.delete(i),d.delete(i),T.delete(i)})}})}function lt(t){const[e,o]=S.useState(),n=S.useMemo(()=>t,[]),i=S.useCallback(r=>{r instanceof HTMLElement?o(ct(r,n)):o(void 0)},[n]),s=S.useCallback(r=>{e&&(r?e.enable():e.disable())},[e]);return S.useEffect(()=>()=>{var r;(r=e?.destroy)===null||r===void 0||r.call(e)},[e]),[i,s]}export{lt as u};
