import{f as g,c as v,b,r as l,j as e}from"./index-yKh5yMux.js";import{u as y}from"./useTitle-CxTBJHZc.js";/* empty css                     */function C(){const o=g(),{addToast:c}=v(),{addOffer:d}=b();y("Новое объявление");const[i,m]=l.useState({title:"",category:"bakery",quantity:"",pickupTime:"",description:""}),[u,p]=l.useState(null),[a,f]=l.useState("");l.useEffect(()=>()=>{a&&URL.revokeObjectURL(a)},[a]);const s=r=>{const{name:t,value:n}=r.target;m(j=>({...j,[t]:n}))},h=r=>{const t=r.target.files[0];if(t){p(t),a&&URL.revokeObjectURL(a);const n=URL.createObjectURL(t);f(n)}},x=r=>{if(r.preventDefault(),!u){c("Пожалуйста, загрузите фото","error");return}const t={...i,imageUrl:a};d(t),c("Объявление успешно создано!"),o("/dashboard")};return e.jsxs("div",{className:"form-page-container",children:[e.jsx("h1",{className:"form-page-title",children:"Новое объявление"}),e.jsx("p",{className:"form-page-subtitle",children:"Заполните детали, чтобы поделиться едой"}),e.jsxs("form",{className:"offer-form",onSubmit:x,children:[e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"image-upload",className:"file-upload-label",children:a?"Нажмите, чтобы изменить фото":"Нажмите, чтобы загрузить фото"}),e.jsx("input",{type:"file",id:"image-upload",className:"file-upload-input",accept:"image/png, image/jpeg",onChange:h}),a&&e.jsx("img",{src:a,alt:"Предпросмотр",className:"image-preview"})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"title",children:"Название"}),e.jsx("input",{type:"text",id:"title",name:"title",value:i.title,onChange:s,required:!0})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"category",children:"Категория"}),e.jsxs("select",{id:"category",name:"category",value:i.category,onChange:s,children:[e.jsx("option",{value:"bakery",children:"Выпечка"}),e.jsx("option",{value:"produce",children:"Овощи и фрукты"}),e.jsx("option",{value:"dairy",children:"Молочные продукты"}),e.jsx("option",{value:"other",children:"Другое"})]})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"quantity",children:"Количество (например, 2 кг, 1 ящик)"}),e.jsx("input",{type:"text",id:"quantity",name:"quantity",value:i.quantity,onChange:s,required:!0})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"pickupTime",children:"Забрать до (время)"}),e.jsx("input",{type:"text",id:"pickupTime",name:"pickupTime",value:i.pickupTime,onChange:s,required:!0})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{htmlFor:"description",children:"Описание"}),e.jsx("textarea",{id:"description",name:"description",rows:"4",value:i.description,onChange:s,required:!0})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>o("/dashboard"),children:"Отмена"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Создать объявление"})]})]})]})}export{C as default};
